%-------------------------------------
% Resum in LaTeX (XeLaTeX)
% Author:  Lucius Chen
% Base on: https://github.com/xyz-yuanhf/yuan-resume
%          http://www.jianxu.net/en/
% License: MIT
%------------------------------------

\NeedsTeXFormat{LaTeX2e}

% Page size
\usepackage[top=1.2cm, bottom=2.6cm, left=1.8cm, right=2.3cm, marginparwidth=1.75cm]{geometry}

% Packages
\usepackage{xcolor}
\usepackage{setspace}
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{tabularx}
\usepackage{ragged2e}
\usepackage{iflang}

% Font style
\usepackage{fontspec}
\usepackage{xeCJK}

% 显示边界
\overfullrule=1pt

% width settings
\newlength{\englishSectionWidth}
\setlength{\englishSectionWidth}{2.7cm}

\newlength{\chineseSectionWidth}
\setlength{\chineseSectionWidth}{1.5cm}

\newlength{\englishSkillWidth}
\setlength{\englishSkillWidth}{10.7em}

\newlength{\chineseSkillWidth}
\setlength{\chineseSkillWidth}{4.7em}

% Font settings
\setmainfont{SabonLTStd}[
	Path=./Fonts/Sabon/,
	Extension = .ttf,
	UprightFont=*-Regular,
	BoldFont=*-Bold,
	ItalicFont=*-Italic,
	BoldItalicFont=*-BoldItalic
]

\newfontfamily\Calluna{Calluna}[
	Path=./Fonts/Calluna/,
	Extension = .otf,
	UprightFont=*-Regular
]

\newfontfamily\CronosLt{CronosProLT}[
	Path=./Fonts/Cronos/,
	Extension = .ttf,
	UprightFont=*-Regular
]

% 方正恒仿宋
\setCJKmainfont{FZHengFSJW}[
	Path=./Fonts/FZHengFSJW/,
	Extension = .ttf,
	UprightFont=*-M,
	BoldFont=*-EB
]

% 方正字汇-明涵黑
\newCJKfontfamily\FZZHMHHJW{FZZHMHHJW}[
	Path=./Fonts/FZZHMHHJW/,
	Extension = .ttf,
	UprightFont=*-Regular
]

% Emph style
\renewcommand{\emph}[1]{\textbf{\fontsize{11pt}{11pt}\selectfont #1}}

% Section block
\newcommand{\sectionBlock}[2]{%
	\noindent
	\begin{minipage}[t]{\iflanguage{english}{\englishSectionWidth}{\chineseSectionWidth}}
		\raggedright #1
	\end{minipage}
	\hfill
	\begin{minipage}[t]{\dimexpr\textwidth-\iflanguage{english}{2.7cm}{1.5cm}-2\tabcolsep-\arrayrulewidth}
		\raggedright #2
	\end{minipage}
	\vspace{25pt}
}

% Section title
\titleformat{\section}{
	\setstretch{1.0}
	\CronosLt\scshape\raggedright
	\fontsize{14.5pt}{14.5pt}\selectfont
}{}{0em}{}

% Award list
\newcommand{\awardListStart}{\begin{itemize}[left=0pt, itemsep=0pt]}
		\newcommand{\awardListEnd}{\end{itemize}\vspace{-11pt}}

% Skill list
\newlength{\maxSkillWidth}
\iflanguage{english}{%
	\setlength{\maxSkillWidth}{\englishSkillWidth}
}{
	\setlength{\maxSkillWidth}{\chineseSkillWidth}
}
\newcommand{\skillListStart}{\begin{itemize}[leftmargin=0pt, label={}, itemsep=0pt]}
		\newcommand{\skillListEnd}{\end{itemize}\vspace{-11pt}}

\newcommand{\skillItem}[2]{%
	\item \begin{tabularx}{\textwidth}{@{}p{\maxSkillWidth}X@{}}
		\emph{#1}: & #2 \\
	\end{tabularx}
}

% Item list
\newcommand{\itemListStart}{\begin{itemize}[itemsep=0pt]}
		\newcommand{\itemListEnd}{\end{itemize}}

% Education information
\newcommand{\eduHeading}[3]{%
	\renewcommand{\arraystretch}{1.2}
	\begin{tabularx}{\textwidth}[t]{@{}lXr@{}}
		\emph{#1} &  & \textit{#2} \\
		#3        &  &             \\
	\end{tabularx}\vspace{2pt}
}

% Work Experience
\newcommand{\workHeading}[3]{%
	\renewcommand{\arraystretch}{1.2}
	\begin{tabularx}{\textwidth}[t]{@{}Xr@{}}
		\emph{#1} $|$ #2 & #3 \\
	\end{tabularx}\vspace{-7pt}
}

% Project information
\newcommand{\projHeadingTitle}[2]{%
	\renewcommand{\arraystretch}{1.2}
	\begin{tabularx}{\textwidth}[t]{@{}X@{}}
		\textbf{#1} \hfill \textit{#2} \\
	\end{tabularx}\vspace{2pt}
}

\newcommand{\projHeadingDesc}[1]{%
	\renewcommand{\arraystretch}{1.2}
	\begin{tabularx}{\textwidth}[t]{@{}X@{}}
		\multicolumn{1}{@{}X@{}}{#1} \\
	\end{tabularx}\vspace{2pt}
}

\newcommand{\projHeading}[3]{%
	\renewcommand{\arraystretch}{1.2}
	\begin{tabularx}{\textwidth}[t]{@{}X@{}}
		\textbf{#1} \hfill \textit{#2} \\
		\multicolumn{1}{@{}X@{}}{#3}   \\
	\end{tabularx}\vspace{2pt}
}

% Project with extra information
\newcommand{\projExtraHeading}[4]{%
	\renewcommand{\arraystretch}{1.2}
	\begin{tabularx}{\textwidth}[t]{@{}X@{}}
		\emph{#1} $|$ #2 \hfill #3            \\
		\multicolumn{1}{@{}X@{}}{\textit{#4}} \\
	\end{tabularx}\vspace{2pt}
}

\newcommand{\paragraphSpacing}{\par\vspace{1em}}
